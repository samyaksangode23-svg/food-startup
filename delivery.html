<!DOCTYPE html>
<html>
<head>
  <title>Delivery - Sanghax</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="card">
  <h2>ðŸ›µ Delivery Dashboard</h2>
  <div id="orders"></div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="firebase.js"></script>

<script>
db.collection("orders")
.where("status","==","Preparing")
.onSnapshot(snapshot=>{
  let html="";
  snapshot.forEach(doc=>{
    const o = doc.data();
    html += `
      <div class="order">
        <b>${o.food}</b><br>
        ${o.address}<br>
        <button onclick="pick('${doc.id}')">Pick Order</button>
      </div>
    `;
  });
  orders.innerHTML = html;
});

function pick(id){
  db.collection("orders").doc(id).update({
    status:"Out for Delivery"
  });
}
</script>
</body>
</html>